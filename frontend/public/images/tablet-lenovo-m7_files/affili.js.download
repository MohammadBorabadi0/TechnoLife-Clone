"array"!=typeof affiliData&&(window.affiliData=window.affiliData||[]),"function"!=typeof affili&&(window.affili=function(){affiliData.push(arguments)}),function(t,l){const n={setConversion(e){return l.request.ajax("POST","https://core.affili.ir/api/v2/clients/conversion",e)}};let s={accountId:void 0,deleteCookie:void 0,referrer:void 0,affId:void 0};function e(){if(t)for(console.log("%cAffili is ready ;)","color: #e733b8; font-size:13px;"),setInterval(o,1e3),i=0;i<t.affiliData.length;i++)t.affiliData[i]._id||(t.affiliData[i]={_id:l.makeid(10),func:t.affiliData[i],called:!1});else setTimeout(()=>e(),100)}const c={detect(e=0,t){console.warn('AFFILI -> ::detect:: The "detect" method is currently deprecated. Just call the "create" method.')},create(e=null,t=function(){}){s.accountId=e;var o=l.request.getUrlParam("aff_id",null),r=l.request.getUrlParam("referrer",null),i=l.request.getUrlParam("dl",1),a=l.request.getUrlParam("exp",30);return void 0===o||void 0===r||void 0===i||void 0===a?(console.warn('AFFILI -> ::create:: The "window.location" is undefined and not set yet! We automatically try again.'),setTimeout(()=>{this.create(e,t)},100)):(console.info("AFFILI -> ::create:: All of the parameters are correctly set."),null===o||null===r?(console.info("AFFILI -> ::create:: Nothing to detect."),!1):(i=JSON.stringify({deleteCookie:i,referrer:r,affId:o}),l.cookies.set("AFFILI_DATA",btoa(i),{expires:parseInt(a)||30}),t(),void console.info("AFFILI -> ::create:: Cookies Set.")))},crossDomain(o,e={}){const r=l.request.getUrlParam("aff_id",null),i=l.request.getUrlParam("referrer",null),a=l.request.getUrlParam("dl",1),n=l.request.getUrlParam("exp",30);return void 0===r||void 0===i||void 0===a||void 0===n?(console.warn('AFFILI -> ::crossDomain:: The "window.location" is undefined and not set yet! We automatically try again.'),setTimeout(()=>{this.crossDomain(o,e)},100)):null!==r&&null!==i&&void setTimeout(()=>{var e=document.createElement("iframe"),t=(e.setAttribute("id","aff-cross-domain-mode"),e.style.display="none",document.body.appendChild(e),new URL(o));t.searchParams.set("aff_id",r),t.searchParams.set("referrer",i),t.searchParams.set("dl",a),t.searchParams.set("exp",n),e.setAttribute("src",t)},1e3)},conversion(e,t,o={},r=!0,i=function(){}){this.sale(e,t,o,r,i)},sale(e,t,o={},r=!0,i=function(){}){try{s=Object.assign({},s,JSON.parse(atob(l.cookies.get("AFFILI_DATA",""))))}catch(e){s.affId=l.cookies.get("affili_aff_id",null),s.referrer=l.cookies.get("affili_referrer",null),s.deleteCookie=l.cookies.get("delete_cookie",1)}var a;return void 0===s.affId||void 0===s.referrer||void 0===s.deleteCookie?(console.warn("AFFILI -> ::conversion:: Vars are not set yet! We automatically try again."),setTimeout(()=>{this.conversion(e,t,o,r,i)},100)):(console.info("AFFILI -> ::conversion:: All of the parameters are availabe and we can track the conversion."),null===s.affId||null===s.referrer?(console.info("AFFILI -> ::conversion:: Cookies are not set."),!1):(a=Object.assign({},{meta_data:null,coupon:null,products:null,type:"sale"},o,{account_id:s.accountId,aff_id:s.affId,referrer:s.referrer,order_id:e,amount:t}),n.setConversion(a).then(e=>{["1",1,"true",!0].includes(s.deleteCookie)&&!0===r&&c.reset(),console.info("AFFILI -> ::conversion:: The conversion tracked, successfully.")}).catch(e=>{}),void i()))},lead(e={},t=function(){}){try{s=Object.assign({},s,JSON.parse(atob(l.cookies.get("AFFILI_DATA",""))))}catch(e){s.affId=l.cookies.get("affili_aff_id",null),s.referrer=l.cookies.get("affili_referrer",null),s.deleteCookie=l.cookies.get("delete_cookie",1)}var o;return void 0===s.affId||void 0===s.referrer||void 0===s.deleteCookie?(console.warn("AFFILI -> ::lead:: Vars are not set yet! We automatically try again."),setTimeout(()=>{this.lead(e,t)},100)):(console.info("AFFILI -> ::lead:: All of the parameters are availabe and we can track the lead."),null===s.affId||null===s.referrer?(console.info("AFFILI -> ::lead:: Cookies are not set."),!1):(o=Object.assign({},{meta_data:null,type:"lead"},e,{account_id:s.accountId,aff_id:s.affId,referrer:s.referrer}),n.setConversion(o).then(e=>{}).catch(e=>{}),void t()))},reset(e=function(){}){s.affId=void 0,s.referrer=void 0,l.cookies.remove("delete_cookie"),l.cookies.remove("affili_referrer"),l.cookies.remove("affili_aff_id"),l.cookies.remove("AFFILI_DATA"),e()},log(e=function(){}){var t=l.cookies.get("AFFILI_DATA",null),t=null===t?{}:JSON.parse(atob(t));console.table({accountId:s.accountId,...t}),e()},__data__(e=function(){}){var t=l.cookies.get("AFFILI_DATA",null);e(null===t?{}:JSON.parse(atob(t)))}},o=()=>{for(i=0;i<t.affiliData.length;i++){var e;t.affiliData[i]._id&&!t.affiliData[i].called&&(e=Array.prototype.slice.call(t.affiliData[i].func,1),void 0!==c[t.affiliData[i].func[0]]?c[t.affiliData[i].func[0]](...e):console.warn('AFFILI -> ::execute:: The "'+(t.affiliData[i].func[0]||"")+'" function does not exists!'),t.affiliData[i].called=!0)}};t.affiliData.push=function(e){Array.prototype.push.call(affiliData,{_id:l.makeid(10),func:e,called:!1})};e()}(window,{cookies:function(l,a){function n(t){for(let e=1;e<arguments.length;e++){var o,r=arguments[e];for(o in r)t[o]=r[o]}return t}function o(t,o,r){if("undefined"!=typeof document){"number"==typeof(r=n({},a,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);let e="";for(var i in r)r[i]&&(e+="; "+i,!0!==r[i])&&(e+="="+r[i].split(";")[0]);return document.cookie=t+"="+l.write(o,t)+e}}return Object.create({set:o,get:function(t,e=void 0){if("undefined"!=typeof document&&(!arguments.length||t)){var o=document.cookie?document.cookie.split("; "):[],r={};for(let e=0;e<o.length;e++){var i=o[e].split("="),a=i.slice(1).join("=");try{var n=decodeURIComponent(i[0]);if(r[n]=l.read(a,n),t===n)break}catch(e){}}return t?r[t]||e:r}},remove:function(e,t){o(e,"",n({},t,{expires:-1}))},withAttributes:function(e){return init(this.converter,n({},this.attributes,e))},withConverter:function(e){return init(n({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(l)}})}({read(e){return(e='"'===e[0]?e.slice(1,-1):e).replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/",domain:["localhost","127.0.0.1"].includes(location.hostname)?location.hostname:"."+location.hostname.split(".").slice(-2).join(".")}),request:{getUrlVars(){function e(e){return decodeURIComponent(e.replace(/\+/g," "))}let t={},o=window.location.search.substring(1),r=window.location.hash.substring(1),i=o.split("&");for(var a in i=i.concat(r.split("&")))i.hasOwnProperty(a)&&1<(a=i[a].toString().split("=")).length&&(t[e(a[0])]=e(a[1]));return t},getUrlParam(e,t=null){return window.location?this.getUrlVars()[e]||t:void 0},ajax(i,a,n){return new Promise((t,o)=>{var e="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r=(e.withCredentials=!0,e.addEventListener("loadend",e=>{200<=e.target.status&&e.target.status<400?t(JSON.parse(e.target.response)):o(e)}),JSON.stringify(n));e.open(i,a),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.setRequestHeader("Access-Control-Allow-Headers","x-requested-with"),e.send(r)})}},makeid(t){let o="";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=r.length;for(let e=0;e<t;e++)o+=r.charAt(Math.floor(Math.random()*i));return o},waitForGlobal(e,t=function(){}){window[e]?t():setTimeout(()=>this.waitForGlobal(e,t),100)}});